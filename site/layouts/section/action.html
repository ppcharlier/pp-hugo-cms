{{ define "main" }}

<style>
.action-landing {
  background: linear-gradient(135deg, #1a3a2f 0%, #2D6A4F 50%, #1a3a2f 100%);
}
.countdown-unit {
  min-width: 80px;
}
@media screen and (min-width: 60em) {
  .countdown-unit {
    min-width: 120px;
  }
}
</style>

<div class="action-landing min-vh-100 flex flex-column justify-center items-center white pa4 tc">

  <!-- Countdown Section -->
  <div class="countdown-container mb4">
    <h1 class="f1 f-headline-l fw9 mb2 lh-title">{{ .Params.headline }}</h1>
    <p class="f3 f2-l fw3 mb4 o-80">{{ .Params.subheadline }}</p>

    <div id="countdown" class="flex justify-center items-center mb4" data-dday="{{ .Params.dday }}">
      <div class="countdown-unit mh2 mh3-l">
        <span id="days" class="f1 f-headline-l fw9 db">--</span>
        <span class="f6 f5-l ttu tracked o-70">{{ i18n "countdown_days" | default "Jours" }}</span>
      </div>
      <div class="countdown-unit mh2 mh3-l">
        <span id="hours" class="f1 f-headline-l fw9 db">--</span>
        <span class="f6 f5-l ttu tracked o-70">{{ i18n "countdown_hours" | default "Heures" }}</span>
      </div>
      <div class="countdown-unit mh2 mh3-l">
        <span id="minutes" class="f1 f-headline-l fw9 db">--</span>
        <span class="f6 f5-l ttu tracked o-70">{{ i18n "countdown_minutes" | default "Minutes" }}</span>
      </div>
      <div class="countdown-unit mh2 mh3-l">
        <span id="seconds" class="f1 f-headline-l fw9 db">--</span>
        <span class="f6 f5-l ttu tracked o-70">{{ i18n "countdown_seconds" | default "Secondes" }}</span>
      </div>
    </div>
  </div>

  <!-- Message -->
  <p class="f4 f3-l mw7 center mb4 lh-copy">{{ .Params.message }}</p>

  <!-- CTAs -->
  <div class="flex flex-column flex-row-l justify-center items-center mb4">
    <a href="{{ .Params.cta_primary_link | relLangURL }}" class="f5 fw6 dib ba b--white bg-white dark-green ph4 pv3 br2 ma2 no-underline grow shadow-4">
      {{ .Params.cta_primary }}
    </a>
    <a href="{{ .Params.cta_secondary_link }}" target="_blank" rel="noopener" class="f5 fw6 dib ba b--white ph4 pv3 br2 ma2 no-underline white grow">
      {{ .Params.cta_secondary }}
    </a>
  </div>

  <!-- Hashtags -->
  <div class="hashtags mb4">
    {{ range .Params.hashtags }}
    <span class="f6 f5-l dib pa2 ma1 ba b--white-30 br2 o-80">{{ . }}</span>
    {{ end }}
  </div>

  <!-- Warning -->
  <p class="f6 o-60 mw6 center mt4">{{ .Params.warning }}</p>

</div>

<script>
(function() {
  const countdown = document.getElementById('countdown');
  if (!countdown) return;

  const dday = new Date(countdown.dataset.dday).getTime();

  function updateCountdown() {
    const now = new Date().getTime();
    const distance = dday - now;

    if (distance < 0) {
      document.getElementById('days').textContent = '0';
      document.getElementById('hours').textContent = '0';
      document.getElementById('minutes').textContent = '0';
      document.getElementById('seconds').textContent = '0';
      return;
    }

    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

    document.getElementById('days').textContent = days;
    document.getElementById('hours').textContent = hours;
    document.getElementById('minutes').textContent = minutes;
    document.getElementById('seconds').textContent = seconds;
  }

  updateCountdown();
  setInterval(updateCountdown, 1000);
})();
</script>

{{ end }}
